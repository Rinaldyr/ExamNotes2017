<!DOCTYPE html>
<html lang="en">
<head>
    <!--[if lt IE 9]>
    <script> document.createElement("keyword"); </script>
    <![endif]-->

    <meta charset="UTF-8">
    <title> Introductory Databases </title>
    <style type="text/css">
        body {
            background-color: #dbffe0;
            font-family: "Georgia", serif;
        }

        code {
            font-family: Consolas, monospace;
            color: #7a2a95;
        }

        keyword {
            color: #a90001;
            font-weight: bold;
        }

        code.type {
            color: #4913d3;
            font-weight: bold;
        }

        #topBtn {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            z-index: 99;
            border: none;
            outline: none;
            background-color: red;
            color: white;
            cursor: pointer;
            padding: 15px;
            border-radius: 10px;
        }

        #topBtn:hover {
            background-color: #555;
        }

        #homeBtn {
            display: block;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 99;
            border: none;
            outline: none;
            background-color: red;
            color: white;
            cursor: pointer;
            padding: 15px;
            border-radius: 10px;
        }

        #homeBtn:hover {
            background-color: #555;
        }
    </style>
</head>
<body>
<hr/> <!------------------------------------------------------------------------------->
<h1> LI Introductory Databases </h1>
<hr/> <!------------------------------------------------------------------------------->
Table of Contents
<ol>
    <li><a href="#intro"> Introduction </a></li>
    <li><a href="#database"> Database </a><ul>
        <li><a href="#database1"> Relational Database </a></li>
    </ul></li>
    <li><a href="#basics"> Basics </a><ul>
        <li><a href="#basics1"> Sets </a></li>
        <li><a href="#basics2"> Keys </a></li>
        <li><a href="#basics3"> SQL </a></li>
    </ul></li>
    <li><a href="#constraints"> Constraints </a><ul>
        <li><a href="#constraints1"> Primary Key </a></li>
        <li><a href="#constraints2"> Foreign Key </a></li>
    </ul></li>
</ol>
<hr/> <!------------------------------------------------------------------------------->

<h2 id="intro"> 1 &dash; Introduction </h2>
<p> As the world we are living in today gets more connected, we start to question how to <keyword>store</keyword> and <keyword>share</keyword> data. Data can be stored in many ways, for instance by memory, written documents, computer Java objects, XML data files, and so on. Data can also be shared through again, memory, sharing files locally in computers, having a document repository, or even data servers. </p>

<p> All of these have their applications, but what if we need something that <keyword>integrates</keyword> with existing systems? <br/> This is where <keyword>databases</keyword> comes in. </p>

<p> We will be using <a href="https://www.postgresql.org/"> PostgreSQL</a> for this module.</p>

<hr/> <!------------------------------------------------------------------------------->

<h2 id="database"> 2 &dash; Database </h2>
<p> <keyword> Database </keyword> is a structured set of data held in a computer, especially one that is accessible in various ways. </p>
<p> Database management system (DBMS) is a core data base, which is a representation of data that can be used for retrieval and maintenance. </p>
<p> There are many database models, but <keyword> relational databases </keyword> are the pre-eminent choice for general purpose of database systems. </p>

<p> In a database, we want an organised collection of data, also with some desirable properties such as the ACID below. </p>
<p><strong> ACID </strong></p>
<ul>
    <li> <keyword>Atomicity</keyword> &dash; a transaction happens as a whole, or not at all. </li>
    <li> <keyword>Consistency</keyword> &dash; a DB is always in a consistent state. </li>
    <li> <keyword>Isolation</keyword> &dash; the effect of two operations happening in parallel is the same as if they had happened sequentially. </li>
    <li> <keyword>Durability</keyword> &dash; once something is stored it won't disappear. </li>
</ul>

<h3 id="database1"> Relational Database </h3>
<p> This is the main model for database systems. Data is structured in the form of <keyword>set</keyword> and <keyword>relations</keyword>, and is connected using <keyword>basic set theory</keyword>. They are viewed as <keyword>tables</keyword>. Queries specify result and <strong>not</strong> how it is computed. </p>

<p> A <keyword>query</keyword> in database is an statement that specifies a request for information from the database. This will be explored more later on. </p>

<hr/> <!------------------------------------------------------------------------------->

<h2 id="basics"> 3 &dash; Basics </h2>
<p> Relational databases uses the set theory to connect data around. </p>
<h3 id="basics1"> Sets </h3>
<p><strong>Sets</strong> are collections of items. They are unordered and do not contain duplicates. They are written as: <code>{2,4,6,8}</code>.</p>

<p> Items inside a set are called <em>elements</em>. <br/> If all the elements of a set are also elements of a second set then the first set is a <em>subset</em> of the second, and the second a <em>superset</em> of the first. <br/> If the second set has extra elements then the first is a <em>proper subset</em> of the second. </p>

<p> Set definitions </p>
<ul>
    <li><keyword>Union &Union;</keyword> of two sets is a set made up of <strong>all</strong> elements of the two sets. </li>
    <li><keyword>Intersection &Intersection;</keyword> between two sets is the set whose elements are in <strong>both</strong> operand sets. </li>
    <li><keyword>Difference /</keyword> between the first the second set is the set whose elements are in the first but not in the second. </li>
    <li><keyword>Empty Set <code>{}</code></keyword> is a set <strong>without</strong> any elements.</li>
</ul>

<p> Relational Definitions </p>
<ul>
    <li><keyword>Domain</keyword> is a non-empty arbitrary set of atomic values.</li>
    <li><keyword>Attribute name</keyword> is a symbol with an associated domain.</li>
    <li><keyword>Relational Schema</keyword> is a finite set of attribute names.</li>
    <li><keyword>Tuple</keyword> of a relational schema is a mapping from the attributes of a relational schema the union of their domains. </li>
    <li><keyword>Relation</keyword> of a relationship schema is a finite set of tuples of a relational schema.</li>
    <li><keyword>Degree or Arity</keyword> of a relationship schema is the number of attributes.</li>
    <li><keyword>Cardinality</keyword> of a relation is the number of tuples or elements in a set. </li>
</ul>

<h3 id="basics2"> Keys </h3>
<p> Keys are used to establish and identify relation between tables. They also ensure that each record within a table can be uniquely identified by combination of one or more fields within a table. </p>
<ul>
    <li><keyword>Super Key</keyword> &ndash; a set of attributes that can <em>always</em> be used to differentiate one tuple from another.</li>
    <li><keyword>Candidate Key</keyword> &ndash; is a subset of a <keyword>Super Key</keyword>. A candidate key is a single field or the least combination of fields that uniquely identifies each record in the table. Every table must have at least one candidate key but at the same time can have several. </li>
    <li><keyword>Concatenated Key</keyword> &ndash; a key with more than one attribute.</li>
    <li><keyword>Primary Key</keyword> &ndash; a candidate key that uniquely identify each record in a table.</li>
    <li><keyword>Foreign Key</keyword> &ndash; a key that points to primary key attributes.</li>
</ul>

<h3 id="basics3"> Standard Query Language (SQL) </h3>
<p> SQL provides the mechanism that is used to manipulate a relational database. The <keyword>Data Definition Language </keyword> (DDL) is used to create, modify and delete parts of the <em>definition</em> of the database. The <keyword>Data Manipulation Language</keyword> (DML) is used to <em>manipulate the data</em>. </p>
<p> In SQL, case and whitespaces are not significant, but there are conventions that is good to follow:</p>
<ul>
    <li> SQL keywords in <strong>upper case</strong>.</li>
    <li> Table names capitalised.</li>
    <li> Field names lower case. </li>
    <li> Layout. </li>
</ul>

<h4> CREATE </h4>
<p><code> CREATE TABLE Name { <br/> &emsp; field1 type1, <br/> &emsp; field2 type2, <br/> &emsp; constraints <br/>} </code></p>
<p> This creates a table with the name, its fields inside the curly braces, and addition of constraints are possible too.</p>
<p> Constraints on the data should be included on one field or across several. </p>
<ul>
    <li><code>NOT NULL</code></li>
    <li><code>UNIQUE</code></li>
</ul>

<h4> DROP </h4>
<p><code> DROP TABLE Name </code></p>
<p> This deletes the table called Name. Don't just go around dropping everything now!</p>

<h4> ALTER </h4>
<p><code> ALTER TABLE Name ADD COLUMN field type </code></p>
<p> This modifies the table definition by adding nulls to the table. </p>

<p> Drop and alter can be applied to other things as well. </p>

<p> Databases are business critical so it may not be possible to rebuild them. They could be live for a very long time, so we update them 'on the fly'. </p>

<p> Some Types </p>
<ul>
    <li> <code class="type">BOOLEAN</code> &dash; TRUE, FALSE, or NULL </li>
    <li> <code class="type">CHAR(size)</code> or <code class="type">CHARACTER(size)</code> &dash; characters </li>
    <li> <code class="type">VARCHAR</code> &dash; strings </li>
    <li> <code class="type">INT</code> or <code class="type">INTEGER</code></li>
    <li> <code class="type">REAL, FLOAT</code> or <code class="type">DOUBLE</code></li>
    <li> <code class="type">NUMERIC</code> or <code class="type">DECIMAL</code></li>
    <li> <code class="type">DATE</code> &dash; date types </li>
    <li> <code class="type">TIME</code> &dash; a type of day value </li>
</ul>

<hr/> <!------------------------------------------------------------------------------->

<h2 id="constraints"> 4 &ndash; Constraints </h2>
<p> <keyword>Constraints</keyword> place restrictions on the values that can be inserted into the database. They are <strong>hard</strong> constraints that the DBMS will check and enforce them. <br/> They are metadata used to: </p>
<ul>
    <li> Make <keyword>explicit domain</keyword> constraints. </li>
    <li> Maintain the <keyword>integrity</keyword> of the database. </li>
</ul>
<p> If these constraints are <keyword>violated</keyword>, then the operation fails. </p>

<h3 id="constraints1"> 4.1 &ndash; Primary Key </h3>
<p><code> PRIMARY KEY(field) </code> or <code>CONSTRAINT constraintName PRIMARY KEY(field)</code></p>
<p> A <keyword>primary key constraint</keyword> enforces <code>UNIQUE</code> and <code>NOT NULL</code>.</p>
<p> Example: </p>
<p><code>CREATE TABLE Student {<br/> &emsp; id INT, <br/> &emsp; name VARCHAR, <br/> &emsp; PRIMARY KEY (id) <br/>}</code> </p>
<p> or by naming the constraint </p>
<p><code>CREATE TABLE Student {<br/> &emsp; id INT, <br/> &emsp; name VARCHAR, <br/> &emsp; CONSTRAINT IDKey PRIMARY KEY (id) <br/>}</code> </p>

<h3 id="constraints2"> 4.2 &ndash; Foreign Key </h3>
<p><code> FOREIGN KEY (field) REFERENCES Table(field) </code></p>
<p> A <keyword>foreign key</keyword> defines a link (usually to a <keyword>primary key</keyword>) to another table</p>
<p> This <em>isn't</em> checked on insertion because it is <strong>guaranteed</strong> to be true. </p>
<p> Example: </p>
<p><code>CREATE TABLE Marks {<br/> &emsp; id INT, <br/> &emsp; mark INT, <br/> &emsp; FOREIGN KEY (id) REFERENCES Student(id) <br/>}</code> </p>

<p> The integrity of the database is maintained by: </p>
<ul>
    <li> <keyword>Forbidding</keyword> the operation <ul>
        <li> RESTRICT &ndash; is done before the operation </li>
        <li> NO ACTION &ndash; by <em>default</em>, is done after </li>
    </ul></li>
    <li> Delete rows that <keyword>reference</keyword> the deleted key (ON DELETE CASCADE) </li>
</ul>

<p> Note that constraints specified in the 'child' table can affect operations on both the 'child' and 'parent' tables. </p>

<p> We can also enforce additional constraints over <keyword>values</keyword>. </p>
<p> Example: </p>
<p> <code>CHECK(age >= 0 AND age <= 120)</code></p>

<hr/> <!------------------------------------------------------------------------------->

<h2 id="sql"> 5 &ndash; Data Manipulation and Query </h2>
<h3 id="sql1"> 5.1 &ndash; Data Manipulation </h3>
<ul>
    <li> INSERT <ul>
        <li> <keyword>Inserts</keyword> data into a table. </li>
        <li><code> INSERT INTO Table VALUES (data1, data2); </code></li>
        <li><code> INSERT INTO Student (id, name) VALUES (4, 'John Doe'); </code></li>
    </ul> </li>
    <li> UPDATE <ul>
        <li> <keyword>Modify</keyword> values in rows. </li>
        <li> Specify table <strong>rows</strong> and <strong>attributes</strong> and their <em>new</em> values. </li>
        <li><code> UPDATE Table SET field='data'; </code></li>
        <li><code> UPDATE Student SET course='CS' WHERE id=23; </code></li>
        <li> If code meet conditions, then data will be updated. </li>
    </ul> </li>
    <li> DELETE <ul>
        <li> <keyword>Deletes</keyword> rows from the table. </li>
        <li><code> DELETE FROM Table WHERE field=data; </code></li>
        <li><code> DELETE FROM Student WHERE id=4; </code></li>
        <li> Rows that meet the conditions will be deleted. </li>
    </ul></li>
</ul>
<p> All these commands are subject to <keyword>constraint checking</keyword>. </p>

<h3 id="sql2"> 5.2 &ndash; Data Query </h3>
<ul>
    <li> SELECT <ul>
        <li> To <keyword>retrieve</keyword> data from tables: <ul>
            <li> One or more combining data from <strong>several tables</strong>. </li>
            <li> Result is a <strong>table</strong>. </li>
        </ul></li>
        <li><code> SELECT * FROM Table; </code></li>
        <li><code> SELECT name FROM Student WHERE id=4; </code></li>
        <li><code> SELECT Student.name, Student.id FROM Student WHERE Student.course='CS'; </code></li>
    </ul></li>
    <li> DISTINCT <ul>
        <li> <keyword>Remove duplicate</keyword> rows</li>
        <li><code> SELECT DISTINCT course From Student; </code></li>
    </ul></li>
    <li> AS <ul>
        <li> Attaches a <keyword>label</keyword> to a column. </li>
    </ul></li>
    <li> ORDER BY <ul>
        <li> Allows the <keyword>order</keyword> of rows to be specified </li>
        <li> ASC/DESC </li>
        <li><code> SELECT FROM * Students ORDER BY name ASC; </code></li>
    </ul></li>
    <li> And many more... </li>
</ul>

<h3 id="sql3"> 5.3 &ndash; Retrieval Criteria </h3>
<ul>
    <li> WHERE <ul>
        <li> Selection criteria that can involve arbitrarily complex expressions. <ul>
            <li> AND </li>
            <li> OR </li>
            <li> Comparison Operators &lt;, &le;, &gt;, &ge;. </li>
            <li> IS [NOT] NULL </li>
            <li> IS [NOT] TRUE </li>
            <li> [NOT] IN </li>
            <li> [NOT] BETWEEN <ul>
                <li><code> Age BETWEEN 18 AND 65 </code></li>
            </ul></li>
        </ul></li>
    </ul></li>
    <li> LIKE <ul>
        <li> Provides <keyword>pattern matching</keyword> on <strong>strings</strong>.</li>
        <li><code>_</code> &ndash; matches <strong>any</strong> character </li>
        <li><code>%</code> &ndash; matches <strong>0</strong> or <strong>more</strong> characters </li>
        <li><code> Name LIKE '_ob%' </code></li>
    </ul></li>
</ul>

<hr/> <!------------------------------------------------------------------------------->


<!-- Utils -->
<button onclick="topFunction()" id="topBtn" title="Go to top">Top</button>
<script>
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
        scrollFunction()
    };

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("topBtn").style.display = "block";
        } else {
            document.getElementById("topBtn").style.display = "none";
        }
    }

    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
</script>
<button onclick="window.location.href='index.html'" id="homeBtn" title="Back to Home"> Home</button>
</body>
</html>
